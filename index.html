<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,900&display=swap" rel="stylesheet">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    
    <!-- Style -->
    <link rel="stylesheet" href="css/style.css">

    <title>Bot Creator Form</title>

    <!-- Sweet alert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico">

  </head>
  <body>
  

  <div class="content">
    
    <div class="container">
      
      <div class="row align-items-stretch justify-content-center no-gutters">
        <div class="col-md-7">
          <div class="form h-100 contact-wrap p-5">
            <img src="./images/logo.png" alt="Bot Creator Form Logo" class="logo">
            <h3 class="text-center">Bot Creator Form</h3>
            <img src="./images/process.png" alt="Bot Creator Process" class="process">
          </div>
        </div>
      </div>
    </div>

  </div>
    
    <script>

      // Update email subject
      const input_email = document.getElementById('email')
      const input_subject = document.querySelector('input[name="subject"]')
      input_email.addEventListener('input', () => {
        input_subject.value = 'Bot: ' + input_email.value
      })

      // Update bot username
      const input_name = document.getElementById('name')
      const input_username = document.getElementById('user-name')
      input_name.addEventListener('input', () => {
        const rand_number = Math.floor(Math.random() * 1000) + 100
        let name_clean = input_name.value.toLowerCase().replaceAll(' ', '_')
        name_clean = `${name_clean}_${rand_number}_bot`
        input_username.value = name_clean
      })

      // Thanks message
      const url_params = new URLSearchParams(window.location.search)
      const thanks = url_params.get('thanks')
      if (thanks) {
        Swal.fire({
          title: 'Bot Created!',
          text: "We've received your bot information and it's gearing up.  Within 24 hours, you'll get an email with access to the configuration panel. There, you can upload the data that will make your bot a master of its domain!",
          icon: 'success',
          confirmButtonText: 'Ok'
        })
      }

      // Update redirect page
      const domain = window.location.origin
      const thanks_page = `${domain}/?thanks=true`
      const input_direct = document.querySelector('input[name="redirect"]')
      input_direct.value = thanks_page
    </script>

  </body>
</html>